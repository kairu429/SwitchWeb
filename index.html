<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>SwitchÈ¢® Web„É©„É≥„ÉÅ„É£„Éº ‚Äî Áü¢Âç∞„Ç≠„ÉºÂØæÂøú</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root{
  --bg1:#0d0d0d;
  --bg2:#1a1a1a;
  --accent:#00bfff;
  --icon-size:140px;
  --gap:50px;
  --circle-size:64px;
}
html,body{height:100%;margin:0;}
body{
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  color:#fff;
  font-family:"Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.topbar{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  padding:10px 24px;
  color:#cfcfcf;
  gap:12px;
}
.status-right{display:flex; gap:14px; align-items:center; color:#bfbfbf;}

.launcher-wrap{position:relative; flex:1; display:flex; align-items:center; justify-content:center; overflow:hidden;}
.launcher{
  display:flex;
  align-items:center;
  overflow-x:auto;
  gap:var(--gap);
  padding:20px 80px;
  scrollbar-width:none; -ms-overflow-style:none;
}
.launcher::-webkit-scrollbar{display:none;}

.app{
  position:relative;
  width:var(--icon-size);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  flex-shrink:0;
  gap:8px;
  transition:transform .18s ease;
}
.app-name{
  margin:0;
  padding:0 6px;
  font-size:14.5px;
  font-weight:700;
  color:var(--accent);
  white-space:nowrap;
  text-overflow:ellipsis;
  overflow:hidden;
  max-width:calc(var(--icon-size)+20px);
  opacity:0;
  transform:translateY(-4px);
  transition:opacity .12s ease, transform .12s ease;
  pointer-events:none;
}
.icon{
  width:var(--icon-size);
  height:var(--icon-size);
  border-radius:18px;
  background:#222;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  box-shadow:0 6px 18px rgba(0,0,0,0.45);
  transition:box-shadow .18s ease, border .12s ease;
  position:relative;
  z-index:1;
}
.icon img{width:100%;height:100%;object-fit:cover;display:block;border-radius:18px;}
.app.selected .app-name{opacity:1; transform:translateY(0);}
.app.selected .icon{
  border:3px solid rgba(0,191,255,0.95);
  box-shadow:0 8px 30px rgba(0,191,255,0.18),0 4px 10px rgba(0,0,0,0.35);
}
.launcher.compact .app:not(.selected){transform: translateX(-8px);}
.delete-btn{
  position:absolute;
  top:-10px;
  right:-10px;
  width:26px;height:26px;border-radius:50%;
  border:none;background:#ff5c5c;color:#fff;cursor:pointer;
  display:none;font-weight:700;box-shadow:0 2px 6px rgba(0,0,0,0.4);
  z-index:2;
}
.app:hover .delete-btn{display:block;}

/* ‰∏∏„Ç¢„Ç§„Ç≥„É≥„É°„Éã„É•„Éº */
.menu{display:flex;justify-content:center;align-items:center;gap:40px;padding:18px 12px;border-top:1px solid rgba(255,255,255,0.04);background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));}
.circle-item{display:flex;flex-direction:column;align-items:center;gap:8px;}
.circle-btn{
  width:var(--circle-size);height:var(--circle-size);
  border-radius:50%;
  background:rgba(255,255,255,0.04);
  display:flex;align-items:center;justify-content:center;
  border:2px solid rgba(255,255,255,0.06);
  cursor:pointer;transition:background .12s ease, transform .12s ease, box-shadow .12s ease;
  color:#fff;font-weight:700;outline:none;
}
.circle-btn.selected{border-color:var(--accent); box-shadow:0 0 0 6px rgba(0,191,255,0.18);}
.circle-btn:hover{transform:translateY(-3px); background:rgba(255,255,255,0.06);}
.circle-label{font-size:13px;color:#ddd;text-align:center;user-select:none;}

@media(max-width:900px){:root{--icon-size:120px;--gap:34px;--circle-size:54px;}}
</style>
</head>
<body>
<div class="topbar">
  <div class="status-right">
    <div id="time"></div>
    <div id="battery">üîã --%</div>
  </div>
</div>

<div class="launcher-wrap">
  <div class="launcher" id="launcher" role="listbox" aria-label="„Ç¢„Éó„É™„É©„É≥„ÉÅ„É£„Éº">
    <div class="app selected" data-url="https://www.google.com" role="option" aria-selected="true">
      <div class="app-name">Google</div>
      <div class="icon"><img src="https://www.google.com/favicon.ico" alt="Google"></div>
      <button class="delete-btn" title="ÂâäÈô§">√ó</button>
    </div>
    <div class="app" data-url="https://www.youtube.com" role="option" aria-selected="false">
      <div class="app-name">YouTube</div>
      <div class="icon"><img src="https://www.youtube.com/favicon.ico" alt="YouTube"></div>
      <button class="delete-btn" title="ÂâäÈô§">√ó</button>
    </div>
    <div class="app" data-url="https://discord.com" role="option" aria-selected="false">
      <div class="app-name">Discord</div>
      <div class="icon"><img src="https://discord.com/favicon.ico" alt="Discord"></div>
      <button class="delete-btn" title="ÂâäÈô§">√ó</button>
    </div>
    <div class="app" data-url="https://github.com" role="option" aria-selected="false">
      <div class="app-name">GitHub</div>
      <div class="icon"><img src="https://github.com/favicon.ico" alt="GitHub"></div>
      <button class="delete-btn" title="ÂâäÈô§">√ó</button>
    </div>
    <div class="app" id="add-app" role="option" aria-selected="false">
      <div class="app-name">ËøΩÂä†</div>
      <div class="icon">Ôºã</div>
    </div>
  </div>
</div>

<div class="menu" role="toolbar" aria-label="„É©„É≥„ÉÅ„É£„Éº„É°„Éã„É•„Éº">
  <div class="circle-item">
    <button class="circle-btn" id="btn-settings" title="Ë®≠ÂÆö" aria-label="Ë®≠ÂÆö">‚öô</button>
    <div class="circle-label">Ë®≠ÂÆö</div>
  </div>
  <div class="circle-item">
    <button class="circle-btn" id="btn-store" title="„Çπ„Éà„Ç¢" aria-label="„Çπ„Éà„Ç¢">üõí</button>
    <div class="circle-label">„Çπ„Éà„Ç¢</div>
  </div>
  <div class="circle-item">
    <button class="circle-btn" id="btn-power" title="ÈõªÊ∫ê" aria-label="ÈõªÊ∫ê">‚èª</button>
    <div class="circle-label">ÈõªÊ∫ê</div>
  </div>
</div>

<script>
// ‰∏äÊÆµ„Ç¢„Éó„É™
const launcher=document.getElementById('launcher');
let selectedIndex=0;
const apps=()=>Array.from(launcher.querySelectorAll('.app'));

// ‰∏ãÊÆµ‰∏∏„Ç¢„Ç§„Ç≥„É≥
const circleBtns=[...document.querySelectorAll('.circle-btn')];
let circleIndex=-1; // -1=„Ç¢„Éó„É™, 0~n=‰∏∏„Ç¢„Ç§„Ç≥„É≥

function updateSelection(){
  apps().forEach((app,i)=>{
    const is=(circleIndex===-1 && i===selectedIndex);
    app.classList.toggle('selected',is);
    app.setAttribute('aria-selected',is?'true':'false');
    const nameEl=app.querySelector('.app-name');
    if(nameEl){nameEl.style.opacity=is?'1':'0'; nameEl.style.transform=is?'translateY(0)':'translateY(-4px)';}
  });
  launcher.classList.add('compact');
  scrollSelectedIntoView();
}

function scrollSelectedIntoView(){
  const sel=apps()[selectedIndex]; if(!sel)return;
  const launcherRect=launcher.getBoundingClientRect();
  const selRect=sel.getBoundingClientRect();
  const offset=(selRect.left+selRect.right)/2-(launcherRect.left+launcherRect.right)/2;
  launcher.scrollBy({left:offset,behavior:'smooth'});
}

function updateCircleSelection(){
  circleBtns.forEach((btn,i)=>btn.classList.toggle('selected',i===circleIndex));
}

// Êìç‰ΩúÈñ¢Êï∞
function openSelectedApp(){
  if(circleIndex===-1){
    const a=apps()[selectedIndex]; if(!a)return;
    if(a.id==='add-app'){
      const name=prompt('„Ç¢„Éó„É™Âêç„ÇíÂÖ•Âäõ'); const url=prompt('URL„ÇíÂÖ•Âäõ');
      if(name&&url){
        const item=document.createElement('div'); item.className='app'; item.dataset.url=url;
        item.innerHTML=`<div class="app-name">${escapeHtml(name)}</div><div class="icon"><img src="${new URL(url).origin+'/favicon.ico'}" alt="${escapeHtml(name)}"></div><button class="delete-btn" title="ÂâäÈô§">√ó</button>`;
        item.querySelector('.delete-btn').addEventListener('click',e=>{e.stopPropagation(); item.remove(); if(selectedIndex>=apps().length) selectedIndex=apps().length-1; updateSelection();});
        launcher.insertBefore(item,document.getElementById('add-app'));
        selectedIndex=apps().indexOf(item); updateSelection();
      }
    }else{window.open(apps()[selectedIndex].dataset.url,'_blank');}
  }else{circleBtns[circleIndex].click();}
}

function escapeHtml(s){return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));}

// „Ç≠„Éº„Éú„Éº„Éâ
document.addEventListener('keydown',e=>{
  if(circleIndex===-1){ // „Ç¢„Éó„É™ÈÅ∏Êäû‰∏≠
    if(e.key==='ArrowRight'){selectedIndex=(selectedIndex+1)%apps().length; updateSelection();}
    else if(e.key==='ArrowLeft'){selectedIndex=(selectedIndex-1+apps().length)%apps().length; updateSelection();}
    else if(e.key==='ArrowDown'){circleIndex=0; updateCircleSelection(); updateSelection();}
    else if(e.key==='Enter') openSelectedApp();
    else if(e.key.toLowerCase()==='x') deleteSelectedApp();
  }else{ // ‰∏ãÊÆµ‰∏∏„Ç¢„Ç§„Ç≥„É≥
    if(e.key==='ArrowRight'){circleIndex=(circleIndex+1)%circleBtns.length; updateCircleSelection();}
    else if(e.key==='ArrowLeft'){circleIndex=(circleIndex-1+circleBtns.length)%circleBtns.length; updateCircleSelection();}
    else if(e.key==='ArrowUp'){circleIndex=-1; updateCircleSelection(); updateSelection();}
    else if(e.key==='Enter') openSelectedApp();
  }
});

// ÂâäÈô§
function deleteSelectedApp(){const a=apps()[selectedIndex]; if(a&&a.id!=='add-app'){a.remove(); if(selectedIndex>=apps().length)selectedIndex=apps().length-1; updateSelection();}}

// ‰∏∏„Ç¢„Ç§„Ç≥„É≥Âãï‰Ωú
document.getElementById('btn-settings').addEventListener('click',()=>{try{window.open('chrome://settings/','_blank');}catch(e){alert('„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„Åß„ÅØÈñã„Åë„Åæ„Åõ„Çì„ÄÇ');}});
document.getElementById('btn-store').addEventListener('click',()=>{window.open('https://www.amazon.co.jp/','_blank');});
document.getElementById('btn-power').addEventListener('click',()=>{alert('ÔΩºÔΩ¨ÔΩ≤ÔΩºÔΩ¨ÔΩ≤ÔΩºÔΩ¨ÔΩ∞ÔΩ≤');});

// ÊôÇÈñì„Éª„Éê„ÉÉ„ÉÜ„É™„Éº
function updateTime(){document.getElementById('time').textContent=new Date().toLocaleTimeString('ja-JP',{hour:'2-digit',minute:'2-digit'});}
setInterval(updateTime,1000); updateTime();
if(navigator.getBattery){navigator.getBattery().then(b=>{function upd(){document.getElementById('battery').textContent='üîã '+Math.round(b.level*100)+'%';} upd(); b.addEventListener('levelchange',upd);});}

// ÂàùÊúü
updateSelection();
window.addEventListener('resize',()=>{setTimeout(()=>scrollSelectedIntoView(),80);});
</script>
</body>
</html>
